# Функции и области видимости

В JavaScript **_функции_** являются основными строительными блоками кода. Они могут быть определены и вызваны, а также переданы в качестве аргументов другим функциям.

В javascript функции можно создавать разными способами:

1. С помощью функционального объявления (function declaration).

```javascript
function add(a, b) {
  return a + b;
}

console.log(add(2, 3)); // Вывод: 5
```

Функциональное объявление создает объект функцию. Каждый раз, когда функция вызывается, она возвращает значение, которое определено оператором, `return` или `undefined`, если функция не возвращает значение.

2. С помощью функционального выражения (function expression).

```javascript
const multiply = function(a, b) {
  return a * b;
};

console.log(multiply(2, 3));  // Вывод: 6
```

Основное различие между выражением и объявлением — это имя функции, которое можно опускать в выражениях для создания анонимных функций.

3. С помощью стрелочной функции (arrow function).

```javascript
const divide = (a, b) => a / b;

console.log(divide(6, 2));  // Вывод: 3
```

4. С помощью незамедлительно вызывающегося функционального выражения (IIFE — Immediately invoked function expression).

```javascript
(function hello() {
  console.log('Hello!');
})();

```

Это функция JavaScript, которая запускается сразу после ее определения.

## Функции обратного вызова и функции высшено порядка

**_Функция обратного вызова_** — функция, которая передается аргументом в другую функцию и вызывается внутри другой функции.

**_Функция высшего порядка_** — функция, которая принимает в качестве аргумента другую функция и вызывает её.

```javascript

const value = 1;

function doCallback(callbackFn, num) {

    return callbackFn(num);
}

function add(num) {
    return value + num;
}

const result = doCallback(add, 10);

console.log(result); // 11

 ```

При создании функции `doCallback` в качестве первого аргумента передается ссылка на функцию, а в качестве второго — аргумент для этой функции, которая будет вызвана с этим аргументом.

## Области видимости

Область — это текущий контекст выполнения, в котором значения и выражения «видимы» или на них можно ссылаться. Если переменная или выражение не находится в текущей области, они не будут доступны для использования. Области также могут быть многоуровневыми в иерархии, чтобы дочерние области имели доступ к родительским областям, но не наоборот.

JavaScript имеет следующие виды областей видимости:

1. Глобальная область видимости: область по умолчанию для всего кода, выполняющегося в режиме сценария.
2. Область модуля: область действия кода, работающего в режиме модуля.
3. Область функции: область, созданная с помощью функции.
4. Область блока: область созданная с помощью фигурных скобок `{}`.

Функция создает область видимости, поэтому (например) к переменной, определенной исключительно внутри функции, нельзя получить доступ извне функции или внутри других функций. При этом, существует механизм, когда функция сохраняет доступ к переменным своей внешней области видимости даже после завершения выполнения, и это называется **_Замыканием_**. При этом говорят, что переменная — объект, который сохраняется, а функция **_замыкается_** по переменной или объекту.

```javascript
function outer() {
  var outerVariable = 'Внешняя переменная';

  function inner() {
    console.log(outerVariable);  // Замыкание: доступ к внешней переменной.
  }

  return inner;
}

var closureFunction = outer();
closureFunction();  // Вывод: «Внешняя переменная».
```
